# Render Blueprint - Healthcare System
# Docs: https://render.com/docs/blueprint-spec

services:
  # ===================================
  # BACKEND API SERVICE
  # ===================================
  - type: web
    name: healthcare-backend
    runtime: docker
    region: singapore
    plan: free
    dockerfilePath: ./healthcare-backend/Dockerfile
    dockerContext: ./healthcare-backend
    healthCheckPath: /health
    envVars:
      # Server
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      
      # Database - MongoDB Atlas (set manually in Render Dashboard)
      - key: MONGO_URI
        sync: false
      
      # JWT Secrets (auto-generated)
      - key: JWT_ACCESS_SECRET
        generateValue: true
      - key: JWT_REFRESH_SECRET
        generateValue: true
      - key: ACCESS_TOKEN_EXPIRES_IN
        value: 15m
      - key: REFRESH_TOKEN_EXPIRES_IN
        value: 7d
      
      # Security
      - key: SALT_ROUNDS
        value: "12"
      
      # Super Admin (set manually)
      - key: SUPER_ADMIN_EMAIL
        sync: false
      - key: SUPER_ADMIN_PASSWORD
        sync: false
      - key: SUPER_ADMIN_NAME
        value: System Administrator
      
      # CORS - Multiple origins (localhost + production)
      - key: CORS_ORIGIN
        value: "https://healthcare-website-rr69.onrender.com,http://localhost:5173,http://localhost:3000"
      
      # Email SMTP (set manually)
      - key: EMAIL_FROM
        sync: false
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASS
        sync: false

  # ===================================
  # FRONTEND STATIC SITE
  # ===================================
  - type: web
    name: healthcare-frontend
    runtime: docker
    region: singapore
    plan: free
    dockerfilePath: ./healthcare-frontend/Dockerfile
    dockerContext: ./healthcare-frontend
    healthCheckPath: /health
    envVars:
      # API URL - Will be backend URL from Render
      - key: VITE_API_URL
        sync: false
